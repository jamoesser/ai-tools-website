<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        textarea { width: 80%; height: 100px; margin: 10px; resize: none; }
        button { padding: 10px 20px; cursor: pointer; }
        #chatOutput { max-width: 600px; margin: auto; text-align: left; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>AI Chatbot</h1>
    <textarea id="userInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)"></textarea><br>
    <button onclick="sendMessage()">Send</button>
    <div id="chatOutput"></div>

    <script>
        async function sendMessage() {
            const userInput = document.getElementById("userInput").value.trim();
            if (!userInput) return;

            const chatOutput = document.getElementById("chatOutput");
            chatOutput.innerHTML += `<p><b>You:</b> ${userInput}</p>`;
            chatOutput.innerHTML += `<p><b>Bot:</b> <i>Thinking...</i></p>`;

            document.getElementById("userInput").value = ""; // Clear input field

            try {
                const response = await fetch("https://api-inference.huggingface.co/models/facebook/blenderbot-3B", {
                    method: "POST",
                    headers: {
                        "Authorization": "Bearer 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",  // Replace with your actual Hugging Face API key
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ inputs: userInput })
                });

                const data = await response.json();
                
                let botResponse = "Sorry, I couldn't understand.";
                if (Array.isArray(data) && data.length > 0) {
                    botResponse = data[0]?.generated_text || botResponse;
                } else if (data.generated_text) {
                    botResponse = data.generated_text;
                }

                chatOutput.innerHTML += `<p><b>Bot:</b> ${botResponse}</p>`;

            } catch (error) {
                chatOutput.innerHTML += `<p><b>Bot:</b> Error fetching response.</p>`;
                console.error("Chatbot API error:", error);
            }
        }

        // Send message when "Enter" is pressed
        function handleKeyPress(event) {
            if (event.key === "Enter" && !event.shiftKey) { 
                event.preventDefault(); // Prevent new line in textarea
                sendMessage();
            }
        }
    </script>
</body>
</html>
